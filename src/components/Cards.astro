---
const {
  text1_how_it_works,
  subtitle_how_it_works,
  text_how_it_works,
  title_card_1_how_it_works,
  paragraph_card_1_how_it_works,
  title_card_2_how_it_works,
  paragraph_card_2_how_it_works,
  title_card_3_how_it_works,
  paragraph_card_3_how_it_works
} = Astro.props;

const cards = [
  {
    bg: 'bg-red-500',
    hoverBg: 'hover:bg-white',
    icon: 'text-red-600',
    cardTextColor: 'text-white',
    title: title_card_1_how_it_works,
    paragraph: paragraph_card_1_how_it_works,
    svg: "M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"
  },
  {
    bg: 'bg-blue-500',
    hoverBg: 'hover:bg-white',
    icon: 'text-blue-600',
    cardTextColor: 'text-white',
    title: title_card_2_how_it_works,
    paragraph: paragraph_card_2_how_it_works,
    svg: "M12 14l9-5-9-5-9 5 9 5zm0 0v6m0 0a3 3 0 01-3-3m3 3a3 3 0 003-3" // Birrete
  },
  {
    bg: 'bg-yellow-500',
    hoverBg: 'hover:bg-white',
    icon: 'text-yellow-600',
    cardTextColor: 'text-white',
    title: title_card_3_how_it_works,
    paragraph: paragraph_card_3_how_it_works,
    svg: "M12 20c4.418 0 8-3.582 8-8s-3.582-8-8-8-8 3.582-8 8 3.582 8 8 8zm-3-5a3 3 0 006 0m-4-4h.01m3.98 0h.01" // Carita feliz
  }
];

const logos = [
  {
    src: "https://destinyonboard.com/wp-content/uploads/2025/05/vanwest-college-vancouver-language-business-destinyonboard.svg.svg",
    alt: "Logo Vanwest College",
    loading: "lazy"
  },
  {
    src: "https://destinyonboard.com/wp-content/uploads/2025/05/new-york-film-academy-usa-film-school-destinyonboard.svg.svg",
    alt: "Logo New York Film Academy",
    loading: "lazy"
  },
  {
    src: "https://destinyonboard.com/wp-content/uploads/2025/05/ascenda-vancouver-business-school-canada-destinyonboard-1.svg-1.svg",
    alt: "Logo Ascenda Vancouver",
    loading: "lazy"
  },
  {
    src: "https://destinyonboard.com/wp-content/uploads/2025/05/miila-montreal-english-language-school-destinyonboard.svg.svg",
    alt: "Logo MIILA Montreal",
    loading: "lazy"
  },
  {
    src: "https://destinyonboard.com/wp-content/uploads/2025/05/fl-language-school-international-programs-destinyonboard.svg.svg",
    alt: "Logo FL Language School",
    loading: "lazy"
  },
  {
    src: "https://destinyonboard.com/wp-content/uploads/2025/05/eduinter-quebec-international-education-destinyonboard.svg.svg",
    alt: "Logo Eduinter Quebec",
    loading: "lazy"
  },
  {
    src: "https://destinyonboard.com/wp-content/uploads/2025/05/canadian-college-vancouver-coop-programs-destinyonboard.svg.svg",
    alt: "Logo Canadian College Vancouver",
    loading: "lazy"
  },
  {
    src: "https://destinyonboard.com/wp-content/uploads/2025/05/bli-language-school-montreal-quebec-destinyonboard.svg.svg",
    alt: "Logo BLI Montreal",
    loading: "lazy"
  },
  {
    src: "https://destinyonboard.com/wp-content/uploads/2025/05/bi-norwegian-business-school-europe-study-destinyonboard.svg.svg",
    alt: "Logo BI Norwegian Business School",
    loading: "lazy"
  },
  {
    src: "https://destinyonboard.com/wp-content/uploads/2025/05/atpal-montreal-english-french-school-destinyonboard.svg.svg",
    alt: "Logo ATPAL Montreal",
    loading: "lazy"
  }
];
---

<!-- TEXTOS SUPERIORES -->
<section class="py-36 sm:py-36 bg-white text-center max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
  <p class="text-blue-600 text-sm font-semibold tracking-wide uppercase opacity-0 transition-opacity duration-1000 reveal">
    {text1_how_it_works}
  </p>
  <h2 class="mt-2 text-4xl sm:text-5xl font-extrabold tracking-tight text-gray-900 opacity-0 transition-opacity duration-1000 delay-200 reveal"
      style="font-family: 'Inter Tight', sans-serif;">
    {subtitle_how_it_works}
  </h2>
  <p class="mt-4 max-w-2xl mx-auto text-lg sm:text-xl text-gray-600 opacity-0 transition-opacity duration-1000 delay-500 reveal">
    {text_how_it_works}
  </p>
</section>

<!-- CARDS -->
<section class="relative py-16 sm:py-24" aria-labelledby="steps-heading">
  <div class="absolute inset-0 z-0">
    <img
      src="https://destinyonboard.com/wp-content/uploads/2025/05/2-1.png"
      alt="Fondo abstracto Destiny On Board"
      class="w-full h-full object-cover"
      loading="lazy"
    />
    <div class="absolute inset-0 backdrop-blur-xs bg-white/10"></div>
  </div>

  <div class="relative z-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="mt-16 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-10">
      {cards.map((card, i) => (
        <article
          class={`relative group opacity-0 transform translate-y-8 transition-all duration-1000 delay-[${i * 300}ms] reveal`}
          tabindex="0"
        >
          <div class="absolute -inset-0.5 rounded-xl blur opacity-25 group-hover:opacity-100 transition duration-500 group-hover:duration-300"></div>
          <div class={`relative ${card.bg} rounded-xl p-8 shadow-lg transition duration-300 ${card.hoverBg} group-hover:text-black ${card.cardTextColor}`}>
            <div class={`flex flex-col items-center text-center transition-colors duration-300`}>
              <div class={`flex items-center justify-center h-16 w-16 rounded-full bg-gray-100 mb-6 ${card.icon} transition duration-300 group-hover:animate-bounce`}>
                <svg class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true" focusable="false">
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d={card.svg}
                  />
                </svg>
              </div>
              <h3 class="text-xl font-semibold mb-4">{card.title}</h3>
              <p>{card.paragraph}</p>
            </div>
          </div>
        </article>
      ))}
    </div>
  </div>
</section>

<!-- Carrusel de Logos -->
<section class="py-20 bg-white overflow-hidden" aria-label="Instituciones aliadas">
  <div class="relative w-full">
    <div class="flex animate-scroll whitespace-nowrap w-max px-3">
      <div class="flex gap-6">
        {logos.map((logo, idx) => (
          <div class="rounded-xl border border-gray-200 p-4 min-w-[140px] h-[100px] flex items-center justify-center bg-white shadow-sm group hover:shadow-md hover:scale-105 transition-all duration-300 hover:border-yellow-400 cursor-pointer">
            <img src={logo.src} alt={logo.alt} class="h-full object-contain grayscale group-hover:grayscale-0 transition duration-300" loading="lazy" />
          </div>
        ))}
      </div>
      {/* Duplicado para loop infinito */}
      <div class="flex gap-6 mx-6" aria-hidden="true">
        {logos.map((logo, idx) => (
          <div class="rounded-xl border border-gray-200 p-4 min-w-[140px] h-[100px] flex items-center justify-center bg-white shadow-sm group hover:shadow-md hover:scale-105 transition-all duration-300 hover:border-yellow-400 cursor-pointer">
            <img src={logo.src} alt={logo.alt} class="h-full object-contain grayscale group-hover:grayscale-0 transition duration-300" loading="lazy" />
          </div>
        ))}
      </div>
    </div>
  </div>
</section>

<style>
  @keyframes scroll {
    0% { transform: translateX(0%); }
    100% { transform: translateX(-50%); }
  }
  .animate-scroll {
    animation: scroll 20s linear infinite;
  }
  .animate-scroll:hover {
    animation-play-state: paused;
  }
</style>

<script is:inline>
  // Intersection Observer para animar cards al entrar en viewport
  const observer = new IntersectionObserver(
    (entries, obs) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add('opacity-100', 'translate-y-0');
          entry.target.classList.remove('opacity-0', 'translate-y-8');
          obs.unobserve(entry.target);
        }
      });
    },
    { threshold: 0.2 }
  );
  document.querySelectorAll('.reveal').forEach(el => observer.observe(el));
</script>
